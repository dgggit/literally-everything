---
layout: post
title: Data Model of Python
category: Python Dev
tags: [ Python, Class ]
date: '2020-03-30'
permalink: '/posts/000004/'
---

(* on draft *)
<div id="Introduction"></div>
# Introduction
---
In python, class means much more than 묶음 other than in C++ or Java.
Class itself can be an object, which we call 'Class Object' in Python. 
<!-- more -->

<div id="ClassTypeObject"></div>
# Class / Object / Type
---

## 1. Python에서 모든 type은 class이다

C에서는 다양한 자료형은 다양한 type를 가진다. (`int`, `bool`, `string`, `function`, `class` 등등)
하지만, in Python, (int, bool, 등등은 모두 // 더 좋은 말?) class이다. 아래 예제에서 볼 수 있듯이 모두 `class` 타입을 가진다. 
```python
>>> int
<class 'int'>   # 'int'라는 이름의 class이다
```

## 2. class는 object이기도 하다 (class object)

```python 
>>> a = int    
>>> a           
<class 'int'>
```
- 위 경우를 보자. int가 class라는 것은 1번에서 설명했고, 아무리 int가 class 개념이라 하더라도 어떻게 이것을 assign할수 있는가?
- 바로 `int` 자체도 object이기 때문이다.
- 개념적으로는 class는 코드에서만 끝나지만 (c++, java), python에서는 그것이 하나의 object로 생성되어 있다.
- 그것을 class object라고 한다.

## 3. 모든 것은 object이다. (Everything is an Object)

- 1, 2, 종합하면, class object를 포함한 모든 것은 프로그램 안에서 object로 존재한다.
- 또한, 프로그램이 실행되면 프로그램에서 모든 것은 object가 된다. 모든 것들이 객체로서 관리된다.
- 그렇다면 프로그램의 runtime에 어떤 객체를 생성할 때 어떻게 할까? 기존 존재하는 객체로부터 새로운 객체를 만드는 방식으로 작동한다.
- 그렇다면 파이썬을 시작함과 동시에 가장 처음 생성되는 객체가 있을 것이다.
- Python에서는 `object`라는 이름의 class object가 바로 그것이다.
- `int`, `list` 등의 class들은 `object`를 상속한다(is subclass of / inherits). 또한, 내가 Python 내에서 `MyClass`라는 이름의 클래스를 만들어 쓰고자 할때, 그 클래스 역시 `object` 클래스를 무조건 상속한다. (* python2.x에서는 사용자가 클래스를 만들 때 `object`를 상속한다는 것을 명시적으로 언급해야 되었으나, Python3부터는 자동적으로 상속한다.)

```python
>>> issubclass(Any_Class, object)
True    # always true!
>>> isinstance(Foo, object)
True    # always true!
```

> subclass 관계의 제일 위에는 `object`가 있다. (`object` is the superclass.) 

## 4. type 연관관계 소개
- **이부분 좀더 이해하자**
- 심지어, 위에서 소개한 `type`도 `object`의 instance이다.

> Type 관계(subtyping)의 제일 위에는 `type`이 있다 (`type` is the supertype.)
> Subtyping과 Subclass에 관해서는 [이 블로그](https://epicdevsold.tistory.com/177)를 참조하는 것이 좋다.


이 개념들을 잘 익혀야 파이썬의 데이터 모델에 대한 그림을 그려가는 데 걸림이 없을 것이다.

<div id="DataModel"></div>
# Data Model 설계

지금부터, 위에 정의한 것들을 생각하며 Python의 가장 기본적이고 근본적인 data model을 설계해나갈 것이다.
(*참고로 아래 나온 다이어그램은 핵심 관계를 나타내기 위해 일부를 생략하지만, 이해를 방해하거나 이해에 차질이 생길 정도는 아니이다. 자세한건 [여기](https://www.google.com/search?sxsrf=ALeKk00MHHGGFBKf8SZ6vtessG6tmdE9ZQ:1585669435637&q=python+builtin+type+hierarchy&tbm=isch&source=univ&sa=X&ved=2ahUKEwjU0cT7hsXoAhXKc3AKHZsKD68QsAR6BAgJEAE&biw=960&bih=895#imgrc=3ZJTDlURtdVvWM)서 참조하자. // Sequence 객체 이런거 보기)

## 1. Type / Object 부터 정의
> 처음부터

> 두개있는 사진 (type/object)
> 
처음 type와 object 두개만 놓고 서로 관계 정의
type은 object를 상속하고, object는 type의 subtype이다
그리고 type은 Type의 subtype이다([reference](https://python.flowdas.com/reference/datamodel.html#the-standard-type-hierarchy)). 이에 보강하자면, ~~.
https://medium.com/@guoxing/brief-intro-to-metaprogramming-with-python-a278fc104b3b

## 2. 확장
>다이어그램 확장

- 위 site의 diagram이 왜 그렇게 그려질지 / 왜 그렇게 설계가 되었을지 생각해보기.

## 3. 인스턴스 관계 이해
지금까지 잘 따라왔다면, isinstance 관계에 대해서도 쉽게 생각할 수 있다.

> issubclass(x, y) means "start at x, follow black arrows until you reach y"
> isinstance(x, y) means "start at x, follow one red arrow, and then apply issubclass"
> [(ref)](https://stackoverflow.com/questions/44329238/python-data-model-subclass-vs-instance)

## 4. Metaclass
https://tech.ssut.me/understanding-python-metaclasses/




<div id="Generating Class"></div>
# Generating Class
---

- metaclass 생성하는 예시
- class 생성하는 예시.
- 동적클래스 형성


<div id="Reference"></div>
## Reference
https://tech.ssut.me/understanding-python-metaclasses/

